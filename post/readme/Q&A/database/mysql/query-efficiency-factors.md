
# MySQL 的查询效率影响因素 ？

## MySQL 的设计
* 存储引擎的选择

* 服务器层和存储引擎层的职责划分

## Scheme设计
* 表大小

* 表字段类型

* 主键

* 分区
```md
  可以通过控制分区来实现只扫描一些用到的索引，而不是所有索引。
```

## 数据
* 数据量
```md
影响索引的大小，如果不命中索引，做全表扫描，那效率随表数据量增长。
```
  
## SQL
* SQL 的编写能否使用当前存在的索引

## 索引
* 索引影响读取的数据行数

* 索引的数量
```md
  MySQL 优化器需要扫描索引，以确定哪些索引可以应用到当前查询。
```

* 索引的大小（与数据记录数有关）
```md
  二级索引会消耗大量的空间，另外索引中的主键查找可能效率更慢（看算法，如果是Hash 可能影响较小），
  二级索引肯定会受影响。
```

* 索引类型
```md
  通常情况下，覆盖索引的效率较高，主键索引（聚簇索引）可以直接索引记录，在某些排序场景也可以使用，
  二级索引，需要两次查询。
```

* 索引列的选择
```md
  主键尽量简单，否者二级索引的存储会增大。
  根据常用查询和关键查询来选择索引列。
```

* 索引列顺序
```md
  影响多列索引是否可用。
```

* 前缀索引前缀长度
```md
  根据索引的选择性来确定前缀索引的长度。
```

* 索引的选择性

* 索引会影响写操作的性能

## 锁
* 锁的范围
```md
  主要与使用的索引有关
```
> 参考 [索引和锁的关系](transaction-index-lock.md)

* 锁带来的阻塞延迟
